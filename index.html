<html>
    <head>
        <title>WatchBat!</title>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js"></script>
        <script>
         var module = angular.module('watchbatApp', []);
         module.controller('watchbat', function($scope) {
             navigator.geolocation.getCurrentPosition(function (position) {
                 $scope.position = position;
             });
             var watchID = navigator.geolocation.watchPosition(function(position) {
                 $scope.position = position;
             });
             $scope.occurrences = [];
             $scope.heard = function() {
                 $scope.occurrences.push({
                     time:new Date(),
                     location: {
                         latitude: $scope.position.coords.latitude,
                         longitude: $scope.position.coords.longitude
                     }
                 });
             };
         });
        </script>
    </head>
    <body ng-app="watchbatApp" ng-controller="watchbat">

        <h1>WatchBat!</h1>

        <form ng-submit="submitForm()">
            <button type="button" ng-click="heard()">I heard a bat! ~-_-~ </button>
            
        </form>
        <table>
            <thead>
                <tr>
                    <td>#</td>
                    <td>Time</td>
                    <td>Location</td>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="occurrence in occurrences">
                    <td>{{ $index + 1 }}</td>
                    <td>
                        {{ occurrence.time | date:long }}
                    </td>
                    <td>
                        {{ occurrence.location }}
                    </td>
                </tr>
            </tbody>
        </table>
        
    </body>
</html>
